#数据库---他山之玉
####[MySQL性能优化的最佳20+条经验(COOLSHELL)](http://coolshell.cn/articles/1846.html)
==================
##[MySQL性能优化的最佳20+条经验(COOLSHELL)](http://coolshell.cn/articles/1846.html)
####1. 为查询缓存优化你的查询
>当有很多相同的查询被执行了多次的时候，这些查询结果会被放到一个缓存中，这样，后续的相同的查询就不用操作表而直接访问缓存结果了。所以，你所需要的就是用一个变量来代替MySQL的函数，从而开启缓存。

####2. EXPLAIN 你的 SELECT 查询
>使用 EXPLAIN 关键字可以让你知道MySQL是如何处理你的SQL语句的。

####3. 当只要一行数据时使用 LIMIT 1
>这样，MySQL数据库引擎会在找到一条数据后停止搜索，而不是继续往后查少下一条符合记录的数据。

####4. 为搜索字段建索引
>索引并不一定就是给主键或是唯一的字段。如果在你的表中，有某个字段你总要会经常用来做搜索，那么，请为其建立索引吧。

####5. 在Join表的时候使用相当类型的例，并将其索引
>如果你的应用程序有很多 JOIN 查询，你应该确认两个表中Join的字段是被建过索引的。这样，MySQL内部会启动为你优化Join的SQL语句的机制。

####6. 千万不要 ORDER BY RAND()
####7. 避免 SELECT *
>你应该养成一个需要什么就取什么的好的习惯。

####8. 永远为每张表设置一个ID
>我们应该为数据库里的每张表都设置一个ID做为其主键，而且最好的是一个INT型的（推荐使用UNSIGNED），并设置上自动增加的AUTO_INCREMENT标志。使用 VARCHAR 类型来当主键会使用得性能下降。

####9. 使用 ENUM 而不是 VARCHAR
>你知道这些字段的取值是有限而且固定的，那么你应该使用 ENUM 而不是 VARCHAR。

####10. 从 PROCEDURE ANALYSE() 取得建议
>PROCEDURE ANALYSE() 会让 MySQL 帮你去分析你的字段和其实际的数据，并会给你一些有用的建议。

####11. 尽可能的使用 NOT NULL
>不要以为 NULL 不需要空间，其需要额外的空间。

####12. Prepared Statements
>可以保护你的程序不会受到“SQL注入式”攻击，并且在性能上得以提升。

####13. 无缓冲的查询
>当你不需要等到所有的结果都返回，只需要第一行数据返回的时候，你就可以开始马上开始工作于查询结果了。

####14. 把IP地址存成 UNSIGNED INT
>这会为你带来查询上的优势，尤其是当你需要使用这样的WHERE条件：IP between ip1 and ip2。你可以使用 INET_ATON() 来把一个字符串IP转成一个整形，并使用 INET_NTOA() 把一个整形转成一个字符串IP。在PHP中，也有这样的函数 ip2long() 和 long2ip()。

####15. 固定长度的表会更快
>如果表中的所有字段都是“固定长度”的，整个表会被认为是 “static” 或 “fixed-length”。例如，表中没有如下类型的字段： VARCHAR，TEXT，BLOB。这样，MySQL 引擎会用另一种方法来处理。

####16. 垂直分割
>“垂直分割”是一种把数据库中的表按列变成几张表的方法，这样可以降低表的复杂度和字段的数目，从而达到优化的目的。

####17. 拆分大的 DELETE 或 INSERT 语句
>执行一个大的 DELETE 或 INSERT 查询，这两个操作是会锁表的，表一锁住了，别的操作都进不来了。如果你有一个大的处理，你定你一定把其拆分，使用 LIMIT 条件是一个好的方法。

####18. 越小的列会越快
>你的数据变得紧凑会对这种情况非常有帮助，因为这减少了对硬盘的访问。

####19. 选择正确的存储引擎
>在 MySQL 中有两个存储引擎 MyISAM 和 InnoDB.MyISAM 适合于一些需要大量查询的应用，但其对于有大量写操作并不是很好。InnoDB 在写操作比较多的时候，会更优秀。


####20. 使用一个对象关系映射器（Object Relational Mapper）
>只有在需要的去取值的时候才会去真正的去做。ORM 还可以把你的SQL语句打包成一个事务，这会比单独执行他们快得多得多。

####21. 小心“永久链接”
>“永久链接”的目的是用来减少重新创建MySQL链接的次数。当一个链接被创建了，它会永远处在连接的状态，就算是数据库操作已经结束了。在你决定要使用“永久链接”之前，你需要好好地考虑一下你的整个系统的架构。