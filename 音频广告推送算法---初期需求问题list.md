#音频广告推送算法---初期需求拉通
##背景
--------------------------------
目前，项目组里希望在产品中插入音频广告。简单的说，就是根据广告主提出的要求，找到符合的人群推送出去。<br>
音频广告不同于传统广告。前者是时间维度上的，后者是空间维度上的。<br>
广告主会购买一些关键词，希望针对这些关键词能做到个性智能推荐。这样在用户收听音乐的间隙插入音频广告，已达到盈利的目的。<br>


## 备选策略：
--------------------------------
品牌广告定向到达目标用户的备选策略大致有如下四种（或其组合）：<br>
>
1 用户ID->品牌广告：即一旦用户被划定为该品牌的目标用户或感兴趣用户，无论其播放什么音乐内容/属于什么用户属性，均以某一频次给其推该品牌的广告。<br>
2 用户类型->品牌广告：即挖掘出对该品牌/品类感兴趣的用户所对应的用户属性，向凡是属于该用户属性的音乐用户推该品牌的广告。<br>
3 歌曲->品牌广告：挖掘出对该品牌/品类感兴趣的用户偏好的歌曲，当凡是用户播放该歌曲时，呼出该品牌广告。<br>
4 歌曲类型->品牌广告：分析各歌曲（标签）类型对应的用户关注的品牌/品类差异，对各歌曲类型分别推相应品类/品牌的广告。<br>

## 需要考虑和明确的问题：
--------------------------------
在做之前，自己梳理了一些最好事先考虑好问题，把这些问题想明白了，后面会好一点。<br>
>   1 广告主提出的关键词的集合有哪些？<br>
    2 用户分为登陆用户和非登录用户。登陆用户可以拿到他们的什么属性？这些属性是怎样和关键词关联起来的？<br>
    3 可以收集到的未登录用户的行为有哪些？怎样和属性关联起来？<br>
    4 用户收听的歌曲是否有标签？怎样把它们和属性关联起来？<br>
    5 假如广告主需要投放10w人次时，若登陆用户中符合人数的有1w，怎么在非登陆用户中排序找到其余的9w？<br>
    6 假如广告主需要投放10w人次时，若登陆用户中符合人数的有10w+，怎样排序？<br>
    7 怎样平衡推送登陆和非登录用户？<br>
    8 怎样制定评价标准来衡量这个模型的好坏？<br>
    9 目前是否可以获得小规模的人工设计的的测试用例，以供前期研究开发？<br>
    10 如何应对不断扩张的关键词集合和曲库集合？<br>
    11 不断扩张的关键词集合和歌曲集合是有关联的，如何处理？<br>


## 目前的计划：
--------------------------------
先做一个可以使用的模型，然后不断地优化迭代，别贪图一步登天。<br>
现在用户分两类：登陆用户，非登录用户。<br>
大搜那边对登陆用户有属性侧写，像下面这样的例子(竖线后面的权值越大说明该用户月倾向该属性)：<br>
>   id:1000000106   id_type:kUserId age:18-24|62    gender:女|95     long_term_interest_normalized:旅游|43 其它|82 汽车|40 成人色情|71 阅读|80 个护美容|68 生活服务|59 医疗/腹泻|47 汽车/汽车档次/中档汽车（10w~30w）|1 汽车/汽车档次/高档汽车（>30w）|1 创业|19 购物/电商购物/聚划算|5 房产家居|34 军事|4 汽车/美国品牌/GMC|45 汽车/美国品牌/福特|53 购物/电商购物/拉手网|5 汽车/美国品牌|7 汽车/日本品牌|11 影视/电视剧|59 汽车/日本品牌/日产|34 出国|56 阅读/都市娱乐小说|57 汽车/中国品牌/中华|29 工作|68 影视/视频节目|77 宠物|72 游戏|71 母婴/怀孕期间|44 体育健身|83 游戏/游戏分类|41 游戏/游戏分类/单机游戏|52 音乐|79 医疗/妇科疾病|47 游戏/游戏分类/大型网游|25 数码|25 母婴|80 购物/电商购物/京东|42 购物/电商购物/天猫|5 购物/电商购物/淘宝|68 购物/电商购物|63 母婴/有小孩|75 母婴/有小孩/婴儿期（0-1岁）|78 手机|72 影视|90 汽车/韩国品牌|2 金融财经|69 教育培训|66 交通票务|15 影视/电影|74 阅读/竞技同人小说|64 购物/电商购物/唯品会|5 购物|86 医疗|80 阅读/奇幻玄幻小说|57 母婴/怀孕准备|40 购物/电商购物/一淘网|4 汽车/中国品牌/野马|47 汽车/欧洲品牌|11 汽车/中国品牌/纳智捷|8 餐饮|79 汽车/中国品牌|76 汽车/日本品牌/丰田|53 汽车/欧洲品牌/奔驰|59 汽车/韩国品牌/起亚|35 <br>


我们现在计划，通过对比未登录用户和登陆用户的行为，来给他“编写”一系列属性。这样每一个用户都会有一些属性，然后我们就可以根据属性进行音频广告进行投放了。<br>
>  1 获取登陆用户的UID来获取大搜那边的标签属性。<br>
   2 获取所有用户的行为，包括听歌时间，听歌时长，听歌内容(歌曲、歌手)，设备型号，地理区域等。<br>
   3 根据行为来进行匹配，可以使用KNN算法。（但这个K取值多少才合适？）<br>
     3.1 用获取到的K个登陆用户的的属性来为这个未登录用户进行一些属性侧写。<br>
     3.2 怎样合并这K个登陆用户的信息？（若是合并后属性过多怎么办？）<br>
     （可以采用超过定长截取，不超过全部取用的策略。这个定长可以用登陆用户的平均属性个数。）<br>
     
最简单的方式是K=1,然后复制其全部的属性。（这简单，但效果也一般。）<br>

## 后续的优化方向：
--------------------------------
>  1 我们希望一个人的属性多比较好，那么也可以对登陆用户之间做行为相似匹配。这样来增多一个人的属性。<br>（但问题是，若是一个的属性越多，那么被广告推送的可能性越大。这对属性多的用户而言是不公平的。怎样处理？）<br>
   2 在用户收听的内容上深入做文章。毕竟喜欢同一个歌手的用户，他们的年龄兴趣相似可能性也大。<br>
   3 在登陆用户的属性权值上做文章。<br>

还有一些问题：<br>
(Q:登陆用户的信息多久更新一次呢？太频繁了耗费资源，太迟缓了，导致推送不准确。非登录用户也是存在多久更新的问题。)<br>
(Q:如何保存中间结果？)<br>


######(以上问题写于2014-09-30，后续再更新)-----------

--------------------------------
######（转载本站文章请注明作者和出处 https://github.com/MangoLiu ，请勿用于任何商业用途）

